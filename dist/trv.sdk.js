!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.trvOauthSdk=t()}(this,function(){"use strict";var e=function(e){var t=[e.oauthOrigin,e.oauthPath,"?client_id=",e.clientId,"&redirect_uri=",e.redirectUri,"&response_type=",e.responseType];return""!==e.scope&&t.push("&scope="+e.scope),t.join("")},t=function(e,t,n){var o=void 0!=window.screenLeft?window.screenLeft:screen.left,i=void 0!=window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,c=r/2-t/2+o,d=s/2-n/2+i,u=window.open(e,"oauthTrivago","scrollbars=yes, width="+t+", height="+n+", top="+d+", left="+c);return window.focus&&u.focus(),u},n=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n)throw Error("ClientId is not specified.");if("string"!=typeof n)throw Error("ClientId should be a string.");var i={oauthOrigin:"https://accounts.trivago.com",oauthPath:"/oauth/v2/check",clientId:"",responseType:"token",redirectUri:"postmessage",scope:""},r=1e3,s=400,c=764;if(i.clientId=n,o.scope){if("string"!=typeof o.scope)throw Error("Scope should be a string.");i.scope=o.scope}var d=function(){var n=t(e(i),s,c);return new Promise(function(e,t){function o(n){n.origin===i.oauthOrigin&&("success"===n.data.status?e(n.data):t(n.data),clearInterval(s),window.removeEventListener("message",o,!1))}window.addEventListener("message",o,!1);var s=setInterval(function(){n.closed&&(t({status:"error",error:"access_denied",error_description:"User closed popup"}),clearInterval(s),window.removeEventListener("message",o,!1))},r)})};return{authorize:d}};return n});
